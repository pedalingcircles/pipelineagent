{
    // Use IntelliSense to learn about possible attributes.
    // Hover to view descriptions of existing attributes.
    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
    "version": "0.2.0",
    "configurations": [
        {
            "type": "bashdb",
            "request": "launch",
            "name": "provision-virtualmachine.sh",
            "cwd": "${workspaceFolder}",
            "program": "${workspaceFolder}/scripts/provision-virtualmachine.sh",
            "args": ["contoso","eastus2","cbadc96b-2923-4459-bb2d-b237af7f84d6","sandbox","/mnt/c/Users/mijohns/Source/repos/byvrate/pipelineagent/iac/templates/agents-virtualmachine.bicep","~/.ssh/vmagent-priv-key.pub","rg-pipelineagent-sandbox-u63kxyluy6fdo-agent","rg-contoso-images","sig.contoso.images","ubuntu2004","1.0.54","nsg-agent","vnet-agent","snet-agent","stagentpasbxu63kxyluy6fd","scriptextensions", "001"]
        },
        {
            "type": "bashdb",
            "request": "launch",
            "name": "Bash-Debug (select script from list of sh files)",
            "cwd": "${workspaceFolder}",
            "program": "${command:SelectScriptName}",
            "args": ["stagentpasbxu63kxyluy6fd", "scriptextensions",  "001", "/mnt/c/Users/mijohns/Source/repos/byvrate/pipelineagent/scripts/agentinstallers"]
        },
        {
            "name": "PowerShell Launch Current File",
            "type": "PowerShell",
            "request": "launch",
            "script": "${file}",
            "cwd": "${file}"
        },
        {
            "name": "New-ServicePrincipal.ps1",
            "type": "PowerShell",
            "request": "launch",
            "script": "${workspaceFolder}/helpers/New-ServicePrincipal.ps1",
            "cwd": "${workspaceFolder}/helpers/New-ServicePrincipal.ps1",
            "args": ["-Subscription $subscription", "-Tenant $tenant", "-DisplayName agent-contoso-agentmgmt-sbx", "-DistinguishedName $distinguishedName", "-KeyFriendlyName agent-contoso-agentmgmt-sbx-key", "-ResourceGroup $resourceGroup"]
        },
        {
            "name": "New-ImagesInfrastructure.ps1",
            "type": "PowerShell",
            "request": "launch",
            "script": "${workspaceFolder}/scripts/New-ImagesInfrastructure.ps1",
            "cwd": "${workspaceFolder}/scripts/New-ImagesInfrastructure.ps1",
            "args": ["-ResourceGroupName rg-contoso-images", "-Location eastus2", "-TemplateFilePath ${workspaceFolder}/templates/images.bicep", "-TemplateParameterFilePath ${workspaceFolder}/templates/images.parameters.sbx.json"]
        },
        {
            "name": "New-AgentInfrastructure.ps1",
            "type": "PowerShell",
            "request": "launch",
            "script": "${workspaceFolder}/scripts/New-AgentInfrastructure.ps1",
            "cwd": "${workspaceFolder}/scripts/New-AgentInfrastructure.ps1",
            "args": ["-ResourceGroupName rg-contoso-agents", "-Location eastus2", "-TemplateFilePath ${workspaceFolder}/templates/agents.bicep", "-TemplateParameterFilePath ${workspaceFolder}/templates/agents.parameters.sbx.json"]
        },
        {
            "name": "New-VMImageDeploy.ps1",
            "type": "PowerShell",
            "request": "launch",
            "script": "${workspaceFolder}/scripts/New-VMImageDeploy.ps1",
            "cwd": "${workspaceFolder}/scripts/New-VMImageDeploy.ps1",
            "args": ["-ResourceGroupName rg-contoso-agents", "-Location eastus2", "-TemplateFilePath ${workspaceFolder}/iac/templates/agents-vmimage.bicep", "-TemplateParameterFilePath ${workspaceFolder}/iac/templates/agents-vmimage.parameters.sbx.json"]
        },
        {
            "name": "New-Image.ps1 Windows",
            "type": "PowerShell",
            "request": "launch",
            "script": "${workspaceFolder}/scripts/New-Image.ps1",
            "cwd": "${workspaceFolder}",
            "args": ["-SubscriptionId cbadc96b-2923-4459-bb2d-b237af7f84d6", "-ResourceGroupName contoso-agentimages", "-ImageGenerationRepositoryRoot ${workspaceFolder}", "-ImageType Windows2019", "-AzureLocation 'East US 2'", "-ServicePrincipalClientId <serviceprincipleclientidgoeshere>", "-ServicePrincipalObjectId <serviceprincipleobjectidgoeshere>", "-ServicePrincipalClientSecret <serviceprinciplesecretgoeshere>", "-TenantId <aadtenentidgoeshere>", "-StorageAccountName stimagepasbxqkoyna36i6fb"]
        },
        {
            "name": "New-Image.ps1 Linux",
            "type": "PowerShell",
            "request": "launch",
            "script": "${workspaceFolder}/scripts/New-PackerImage.ps1",
            "cwd": "${workspaceFolder}",
            "args": ["-SubscriptionId cbadc96b-2923-4459-bb2d-b237af7f84d6", "-BuildResourceGroupName rg-pipelineagent-sandbox-qkoyna36i6fbu-imagebuilder", "-CaptureContainerName images", "-ResourceGroupName rg-pipelineagent-sandbox-qkoyna36i6fbu-image", "-ImageGenerationRepositoryRoot ${workspaceFolder}/.virtual-environments", "-ImageType Ubuntu2004", "-ServicePrincipalClientId $ServicePrincipalClientId", "-ServicePrincipalObjectId $ServicePrincipalObjectId", "-ServicePrincipalClientSecret $ServicePrincipalClientSecret", "-TenantId $TenantId", "-StorageAccountName stimagepasbxqkoyna36i6fb"]
        },
        {
            "name": "ConvertTo-ManagedImage.ps1",
            "type": "PowerShell",
            "request": "launch",
            "script": "${workspaceFolder}/scripts/ConvertTo-ManagedImage.ps1",
            "cwd": "${file}",
            "args": ["-ContainerName system", "-DateVersion 20210811", "-DateVersionCounter 01", "-Location eastus2", "-ImageType ubuntu2004", "-Tags @(\"a=b\",\"c=d\")", "-Prefix Microsoft.Compute/Images/images/24000", "-ResourceGroupName rg-mijohns-images-sbx-eastus2-001", "-StorageAccountName stmijohnsimages001", "-Clean"]
        },
        {
            "name": "Publish-ImageToSharedGallery.ps1",
            "type": "PowerShell",
            "request": "launch",
            "script": "${workspaceFolder}/scripts/Publish-ImageToSharedGallery.ps1",
            "cwd": "${file}",
            "args": ["-ResourceGroupName rg-mijohns-images-sbx-eastus2-001", "-ImageDefinitionDescription 'foobar'", "-SharedImageGalleryName sig.agentimages", "-ImageDefinitionName Ubuntu2004", "-Location eastus2", "-ImagePublisher Contoso", "-ImageOffer preview", "-ImageSku baseline", "-OsType Linux", "-ImageVersion 1.0.0", "-ImageName packer-ubuntu2004-20210811.01", "-EndOfLifeDate '1/1/2020'", "-ImageVersionTags @(\"a=b\",\"c=d\")", "-ImageDefinitionTags @(\"e=f\",\"g=h\")", "-Clean"]
        },
        {
            "name": "Remove-IntermediateImageResources.ps1",
            "type": "PowerShell",
            "request": "launch",
            "script": "${workspaceFolder}/scripts/Remove-IntermediateImageResources.ps1",
            "cwd": "${file}",
            "args": ["-DestinationContainerName system", "-WorkingContainerName images", "-Prefix Microsoft.Compute/Images/images/23792", "-StorageAccountName contosopackerbuilder001"]
        }
    ]
}

